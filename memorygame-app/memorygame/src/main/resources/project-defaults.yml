#service:
#    name: ${service.name}
#http://deltaspike.apache.org/documentation/projectstage.html
#org:
#  apache:
#    deltaspike:
#      ProjectStage: Development
swarm:
    project:
        stage: default
#    port:
#        offset: "${swarm.port.offset}"
    http:
        host: localhost
        port: 8484
    undertow:
        servlet-containers:
            default:
                allow-non-standard-wrappers: true
    deployment:
        memorygame.war:
            web:
                login-config:
                    auth-method: DIGEST
#                    form-login-config:
#                        form-login-page: /login.jsp
#                        form-error-page: /login_error.jsp
                    security-domain: my-domain
                security-constraints:
                    - url-pattern: /nonexists/*
                      methods: [GET, POST, PUT, DELETE]
                      roles: [admin, user]
    security:
        security-domains:
            my-domain:
                classic-authentication:
                    login-modules:
                        Database:
                            code: Database
                            flag: required
                            module-options:
                                dsJndiName: java:/MemoryGameDS
                                principalsQuery: SELECT password FROM USERS WHERE username=?
                                rolesQuery: SELECT 'user', 'Roles' FROM USERS WHERE username=?
    datasources:
        xa-data-sources:
            MemoryGameDS:
                driver-name: oracle
                xa-datasource-class: oracle.jdbc.xa.client.OracleXADataSource
                jndi-name: java:/MemoryGameDS
                user-name: MG
                password: mg
                min-pool-size: 10
                max-pool-size: 20
                check-valid-connection-sql: select ISVALIDSESSION from dual
                valid-connection-checker-class-name: org.jboss.jca.adapters.jdbc.extensions.oracle.OracleValidConnectionChecker
                validate-on-match: true
                background-validation: false
                stale-connection-checker-class-name: org.jboss.jca.adapters.jdbc.extensions.oracle.OracleValidConnectionChecker
                exception-sorter-class-name: org.jboss.jca.adapters.jdbc.extensions.oracle.OracleExceptionSorter
                same-rm-override: false
                no-tx-separate-pool: true
                no-recovery: true
                xa-datasource-properties:
                    URL:
                        value: jdbc:oracle:thin:@localhost:1521:XE
    logging:
        root-logger:
            level: INFO
            handlers:
                - CONSOLE
                - FILE
#                - SYSLOG
        pattern-formatters:
            FORMAT:
                pattern: "%d{yyyy-MM-dd HH:mm:ss.SSS} %-5p [thread:%t] [%c{10}] [sid:%X{extSessionId}] - %s%E%n"
        console-handlers:
            CONSOLE:
                named-formatter: FORMAT
        periodic-size-rotating-file-handlers:
            FILE:
                append: true
                autoflush: true
                file:
                    path: log/memorygame/memorygame.log
                named-formatter: FORMAT
                rotate-size: 50M
                suffix: .yyyy-MM-dd
#        syslog-handlers:
#            SYSLOG:
#                app-name: swarm-memorygame-service-app
#                enabled: true
#                port: 514
#                server-address: localhost
#                syslog-format: RFC5424
#        loggers:
#            org.wildfly.swarm.config:
#               category: org.wildfly.swarm.config
#               level: DEBUG
